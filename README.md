This is comprised of badly written code and some unit tests. The overall objective is to refactor the code and keep the tests passing.

Fork, create a branch, send us the PR.

Approach this as if it was the beginnings of a project that was likley to become a very large and long lived solution.
Structure dependencies and organise the soltion as you see fit.
Refactor the "ProcessPayment" method, give it your best shot at making it readable and maintainable.
